module.exports=[9265,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(210),g=a.i(14548),h=a.i(70106);let i=(0,h.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),j=(0,h.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var k=a.i(5062),l=a.i(40695),m=a.i(5522),n=a.i(17171),o=a.i(46893),p=a.i(80281),q=a.i(3130),r=a.i(21958),s=a.i(87682),t=a.i(69240),u=a.i(23292);function v(){let a=(0,d.useRouter)(),h=(0,d.useParams)().id,[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)({team:"yellow",description:"",jottacloud_embed_url:"",quality:"1080p",recording_date:"",duration:0,thumbnail_url:""});async function F(){let b=(0,t.getSupabaseBrowserClient)(),{data:c,error:d}=await b.from("ensembles").select("*").eq("id",h).single();if(d){console.error("[v0] Error loading ensemble:",d.message),u.toast.error("Kunne ikke laste ensemble"),a.push("/admin/ensembler");return}let{data:e}=await b.from("recordings").select("*").eq("ensemble_id",h).order("recording_date",{ascending:!1});A({...c,yellow_cast:c.yellow_cast||[],blue_cast:c.blue_cast||[],crew:c.crew||[],genre:c.genre||[]}),C(e||[]),w(!1)}async function G(){if(!z)return;y(!0);let a=(0,t.getSupabaseBrowserClient)(),{error:b}=await a.from("ensembles").update(z).eq("id",h);b?(console.error("[v0] Save error:",b.message),u.toast.error("Kunne ikke lagre: "+b.message)):u.toast.success("Ensemble lagret!"),y(!1)}async function H(){let a=(0,t.getSupabaseBrowserClient)(),{data:b,error:c}=await a.from("recordings").insert({ensemble_id:h,...D}).select().single();c?(console.error("[v0] Add recording error:",c.message),u.toast.error("Kunne ikke legge til opptak: "+c.message)):(C([b,...B]),E({team:"yellow",description:"",jottacloud_embed_url:"",quality:"1080p",recording_date:"",duration:0,thumbnail_url:""}),u.toast.success("Opptak lagt til!"))}async function I(a){if(!confirm("Er du sikker på at du vil slette dette opptaket?"))return;let b=(0,t.getSupabaseBrowserClient)(),{error:c}=await b.from("recordings").delete().eq("id",a);c?u.toast.error("Kunne ikke slette opptak: "+c.message):(C(B.filter(b=>b.id!==a)),u.toast.success("Opptak slettet"))}return((0,c.useEffect)(()=>{F()},[h]),v)?(0,b.jsx)("main",{className:"container px-4 py-8",children:(0,b.jsx)("p",{children:"Laster..."})}):z?(0,b.jsxs)("main",{className:"container px-4 py-8 max-w-4xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,b.jsx)(l.Button,{asChild:!0,variant:"ghost",size:"icon",children:(0,b.jsx)(e.default,{href:"/admin/ensembler",children:(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold",children:["Rediger ",z.title]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Endre ensemble og legg til opptak"})]}),(0,b.jsxs)(l.Button,{onClick:G,disabled:x,children:[(0,b.jsx)(g.Save,{className:"h-4 w-4 mr-2"}),x?"Lagrer...":"Lagre"]})]}),(0,b.jsxs)(r.Tabs,{defaultValue:"info",className:"space-y-6",children:[(0,b.jsxs)(r.TabsList,{children:[(0,b.jsx)(r.TabsTrigger,{value:"info",children:"Info"}),(0,b.jsx)(r.TabsTrigger,{value:"cast",children:"Rollebesetning"}),(0,b.jsxs)(r.TabsTrigger,{value:"recordings",children:["Opptak (",B.length,")"]}),(0,b.jsx)(r.TabsTrigger,{value:"media",children:"Media"})]}),(0,b.jsx)(r.TabsContent,{value:"info",className:"space-y-6",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsx)(q.CardTitle,{children:"Grunnleggende informasjon"})}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Tittel"}),(0,b.jsx)(m.Input,{value:z.title,onChange:a=>A({...z,title:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Slug (URL)"}),(0,b.jsx)(m.Input,{value:z.slug,onChange:a=>A({...z,slug:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Beskrivelse"}),(0,b.jsx)(o.Textarea,{value:z.description||"",onChange:a=>A({...z,description:a.target.value}),rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Kort synopsis"}),(0,b.jsx)(o.Textarea,{value:z.synopsis_short||"",onChange:a=>A({...z,synopsis_short:a.target.value}),rows:2})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Full synopsis"}),(0,b.jsx)(o.Textarea,{value:z.synopsis_long||"",onChange:a=>A({...z,synopsis_long:a.target.value}),rows:5})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"År"}),(0,b.jsx)(m.Input,{type:"number",value:z.year||"",onChange:a=>A({...z,year:Number.parseInt(a.target.value)})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Varighet (min)"}),(0,b.jsx)(m.Input,{type:"number",value:z.duration_minutes||"",onChange:a=>A({...z,duration_minutes:Number.parseInt(a.target.value)})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Aldersgrense"}),(0,b.jsxs)(s.Select,{value:z.age_rating||"",onValueChange:a=>A({...z,age_rating:a}),children:[(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{placeholder:"Velg"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"A",children:"Alle"}),(0,b.jsx)(s.SelectItem,{value:"6",children:"6 år"}),(0,b.jsx)(s.SelectItem,{value:"9",children:"9 år"}),(0,b.jsx)(s.SelectItem,{value:"12",children:"12 år"}),(0,b.jsx)(s.SelectItem,{value:"15",children:"15 år"}),(0,b.jsx)(s.SelectItem,{value:"18",children:"18 år"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Regissør"}),(0,b.jsx)(m.Input,{value:z.director||"",onChange:a=>A({...z,director:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Opptakspris (NOK)"}),(0,b.jsx)(m.Input,{type:"number",value:z.recording_price_nok||"",onChange:a=>A({...z,recording_price_nok:Number.parseFloat(a.target.value)})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Gult lag - navn"}),(0,b.jsx)(m.Input,{value:z.yellow_team_name||"",onChange:a=>A({...z,yellow_team_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Blått lag - navn"}),(0,b.jsx)(m.Input,{value:z.blue_team_name||"",onChange:a=>A({...z,blue_team_name:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Switch,{checked:z.is_published,onCheckedChange:a=>A({...z,is_published:a})}),(0,b.jsx)(n.Label,{children:"Publisert"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Switch,{checked:z.featured,onCheckedChange:a=>A({...z,featured:a})}),(0,b.jsx)(n.Label,{children:"Fremhevet"})]})]})]})]})}),(0,b.jsxs)(r.TabsContent,{value:"cast",className:"space-y-6",children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsx)(q.CardTitle,{children:"Gult lag"})}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(z.yellow_cast||[]).map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(m.Input,{placeholder:"Navn",value:a.name,onChange:b=>{let d=[...z.yellow_cast];d[c]={...a,name:b.target.value},A({...z,yellow_cast:d})}}),(0,b.jsx)(m.Input,{placeholder:"Rolle",value:a.role,onChange:b=>{let d=[...z.yellow_cast];d[c]={...a,role:b.target.value},A({...z,yellow_cast:d})}}),(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{let a=z.yellow_cast.filter((a,b)=>b!==c);A({...z,yellow_cast:a})},children:(0,b.jsx)(j,{className:"h-4 w-4"})})]},c)),(0,b.jsxs)(l.Button,{variant:"outline",onClick:()=>{A({...z,yellow_cast:[...z.yellow_cast||[],{name:"",role:""}]})},children:[(0,b.jsx)(i,{className:"h-4 w-4 mr-2"}),"Legg til"]})]})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsx)(q.CardTitle,{children:"Blått lag"})}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(z.blue_cast||[]).map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(m.Input,{placeholder:"Navn",value:a.name,onChange:b=>{let d=[...z.blue_cast];d[c]={...a,name:b.target.value},A({...z,blue_cast:d})}}),(0,b.jsx)(m.Input,{placeholder:"Rolle",value:a.role,onChange:b=>{let d=[...z.blue_cast];d[c]={...a,role:b.target.value},A({...z,blue_cast:d})}}),(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{let a=z.blue_cast.filter((a,b)=>b!==c);A({...z,blue_cast:a})},children:(0,b.jsx)(j,{className:"h-4 w-4"})})]},c)),(0,b.jsxs)(l.Button,{variant:"outline",onClick:()=>{A({...z,blue_cast:[...z.blue_cast||[],{name:"",role:""}]})},children:[(0,b.jsx)(i,{className:"h-4 w-4 mr-2"}),"Legg til"]})]})]})]}),(0,b.jsxs)(r.TabsContent,{value:"recordings",className:"space-y-6",children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Legg til nytt opptak"}),(0,b.jsx)(q.CardDescription,{children:"Last opp video til Jottacloud og lim inn delingslenken her. Lenken vil bli skjult for brukere."})]}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Lag"}),(0,b.jsxs)(s.Select,{value:D.team,onValueChange:a=>E({...D,team:a}),children:[(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"yellow",children:"Gult lag"}),(0,b.jsx)(s.SelectItem,{value:"blue",children:"Blått lag"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Kvalitet"}),(0,b.jsxs)(s.Select,{value:D.quality,onValueChange:a=>E({...D,quality:a}),children:[(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"720p",children:"720p"}),(0,b.jsx)(s.SelectItem,{value:"1080p",children:"1080p"}),(0,b.jsx)(s.SelectItem,{value:"4K",children:"4K"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Jottacloud embed/delingslenke"}),(0,b.jsx)(m.Input,{placeholder:"https://www.jottacloud.com/s/...",value:D.jottacloud_embed_url,onChange:a=>E({...D,jottacloud_embed_url:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Beskrivelse"}),(0,b.jsx)(m.Input,{placeholder:"F.eks. Premiere 15. mars 2024",value:D.description,onChange:a=>E({...D,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Opptaksdato"}),(0,b.jsx)(m.Input,{type:"date",value:D.recording_date,onChange:a=>E({...D,recording_date:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Varighet (sekunder)"}),(0,b.jsx)(m.Input,{type:"number",value:D.duration||"",onChange:a=>E({...D,duration:Number.parseInt(a.target.value)})})]})]}),(0,b.jsxs)(l.Button,{onClick:H,disabled:!D.jottacloud_embed_url,children:[(0,b.jsx)(i,{className:"h-4 w-4 mr-2"}),"Legg til opptak"]})]})]}),B.length>0&&(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsx)(q.CardTitle,{children:"Eksisterende opptak"})}),(0,b.jsx)(q.CardContent,{className:"space-y-4",children:B.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,b.jsx)(k.Film,{className:"h-8 w-8 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-medium",children:["yellow"===a.team?"Gult lag":"Blått lag"," - ",a.quality]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.recording_date&&new Date(a.recording_date).toLocaleDateString("nb-NO")})]}),(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>I(a.id),children:(0,b.jsx)(j,{className:"h-4 w-4"})})]},a.id))})]})]}),(0,b.jsx)(r.TabsContent,{value:"media",className:"space-y-6",children:(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsx)(q.CardTitle,{children:"Bilder og video"})}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Miniatyrbilde URL"}),(0,b.jsx)(m.Input,{value:z.thumbnail_url||"",onChange:a=>A({...z,thumbnail_url:a.target.value}),placeholder:"https://..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Banner URL"}),(0,b.jsx)(m.Input,{value:z.banner_url||"",onChange:a=>A({...z,banner_url:a.target.value}),placeholder:"https://..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Trailer URL"}),(0,b.jsx)(m.Input,{value:z.trailer_url||"",onChange:a=>A({...z,trailer_url:a.target.value}),placeholder:"https://youtube.com/..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Hero video URL"}),(0,b.jsx)(m.Input,{value:z.hero_video_url||"",onChange:a=>A({...z,hero_video_url:a.target.value}),placeholder:"https://..."})]})]})]})})]})]}):(0,b.jsx)("main",{className:"container px-4 py-8",children:(0,b.jsx)("p",{children:"Ensemble ikke funnet"})})}a.s(["default",()=>v,"dynamic",0,"force-dynamic"],9265)}];

//# sourceMappingURL=app_admin_ensembler_%5Bid%5D_page_tsx_d600d1ce._.js.map